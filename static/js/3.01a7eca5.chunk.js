webpackJsonp([3],{529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n.n(a),r=n(74),s=(n.n(r),n(548)),l=(n.n(s),n(48)),i=n(47),c=n(556),u=n(555),p=n(549),d=n(835),m=n(550),f=n(552),h=n(554),y=n.n(h),b=n(551),v=n.n(b),g=n(574),S=n.n(g),E=n(557),T=n.n(E),P=n(205),C=n.n(P),w=n(845),_=n.n(w),D=n(575),I=n.n(D),k=n(204),x=n(561),M=n(573),j=n.n(M),O=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},R=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),N=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,s=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},L=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},A=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,r){function s(e){try{i(a.next(e))}catch(e){r(e)}}function l(e){try{i(a.throw(e))}catch(e){r(e)}}function i(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,l)}i((a=a.apply(e,t||[])).next())})},F=this&&this.__generator||function(e,t){function n(e){return function(t){return a([e,t])}}function a(n){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,r&&(s=2&n[0]?r.return:n[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,n[1])).done)return s;switch(r=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return i.label++,{value:n[1],done:!1};case 5:i.label++,r=n[1],n=[0];continue;case 7:n=i.ops.pop(),i.trys.pop();continue;default:if(s=i.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){i=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){i.label=n[1];break}if(6===n[0]&&i.label<s[1]){i.label=s[1],s=n;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(n);break}s[2]&&i.ops.pop(),i.trys.pop();continue}n=t.call(e,i)}catch(e){n=[6,e],r=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,r,s,l,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},B=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,o,r=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(a=r.next()).done;)s.push(a.value)}catch(e){o={error:e}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},z=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(B(arguments[t]));return e},K=Object(l.b)(v.a)(G||(G=O(["margin-left: 1em;"],["margin-left: 1em;"]))),q=Object(l.b)(I.a)(W||(W=O(["max-width: 250px;"],["max-width: 250px;"]))),U=Object(l.b)(_.a)(V||(V=O(["margin: 0.5em !important;"],["margin: 0.5em !important;"]))),H=[{value:"user",label:"user(最近联系人(用户)，组织架构，我的好友)"},{value:"chatroom",label:"chatroom(最近联系人(群组))"},{value:"publicAccount",label:"publicAccount(公众账号)"},{value:"localContact",label:"localContact(手机联系人)"},{value:"visitor",label:"visitor(访客)"}],J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.userId="u116115",t.type=2,t.selectSessionParams={multiple:!0,title:"选择会话",sessionType:[],limit:void 0,unselect:!0,tenementId:void 0,selected:[],items:void 0},t.selectedSession=[],t.handleItemsChange=function(e){var n=e.target.value;t.items=n},t.validateItems=function(){var e=t.items;try{t.itemsError=void 0;var n=JSON.parse(e),a=JSON.stringify(n,void 0,"  ");t.items=a,Object(x.c)({items:j.a.compressToBase64(a)}),t.selectSessionParams.items=n}catch(n){t.itemsError=n,t.items=e}},t.selectSelected=function(e){return A(t,void 0,void 0,function(){var t,n;return F(this,function(a){switch(a.label){case 0:e.preventDefault(),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Object(k.f)().selectSession({sessionType:this.selectSessionParams.sessionType,title:"选择已选"})];case 2:return t=a.sent(),this.selectSessionParams.selected=t,[3,4];case 3:return n=a.sent(),console.log("选择会话失败",n),[3,4];case 4:return[2]}})})},t.handleMultipleToggle=function(e,n){t.selectSessionParams.multiple=n},t.handleTitleChange=function(e){t.selectSessionParams.title=e.target.value},t.handleUserIdChange=function(e){t.userId=e.target.value},t.selectSession=function(){return A(t,void 0,void 0,function(){var e,t;return F(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Object(k.f)().selectSession(this.selectSessionParams)];case 1:return e=n.sent(),this.selectedSession=e,[3,3];case 2:return t=n.sent(),t instanceof k.a&&alert("选择会话失败: "+t.errCode+": "+t.message),[3,3];case 3:return[2]}})})},t.openSession1=function(e,n){void 0===e&&(e=t.userId),Object(k.f)().openDialog({type:n?"user"===n?2:1:2,id:e})},t.openSession=function(){Object(k.f)().openDialog({id:t.userId,type:t.type})},t}return R(t,e),t.prototype.componentWillMount=function(){var e=Object(x.a)();this.items=e.items?j.a.decompressFromBase64(e.items):"",null!=this.items&&""!==this.items&&(this.selectSessionParams.items=JSON.parse(this.items))},t.prototype.render=function(){var e=this;return o.a.createElement("div",{className:this.props.className},o.a.createElement(s.Helmet,null,o.a.createElement("title",null,"会话")),o.a.createElement(p.a,null,"1. 会话选择器",o.a.createElement(f.a,{android:!0,ios:!0,pc:!0})),o.a.createElement(m.a,null,o.a.createElement(q,{label:"多选",toggled:this.selectSessionParams.multiple,onToggle:this.handleMultipleToggle}),o.a.createElement("br",null),o.a.createElement(y.a,{floatingLabelText:"标题",value:this.selectSessionParams.title,onChange:this.handleTitleChange}),o.a.createElement("br",null),o.a.createElement(T.a,{multiple:!0,floatingLabelText:"会话类型",value:z(this.selectSessionParams.sessionType),onChange:function(t,n,a){e.selectSessionParams.sessionType=a}},H.map(function(t){return o.a.createElement(C.a,{key:t.value,value:t.value,primaryText:t.label,checked:-1!==(e.selectSessionParams.sessionType||[]).indexOf(t.value),insetChildren:!0})})),o.a.createElement("br",null),o.a.createElement(y.a,{floatingLabelText:"最多可选择数目",value:this.selectSessionParams.limit,onChange:function(t){var n=""===t.target.value.trim()?void 0:parseInt(t.target.value,10);e.selectSessionParams.limit=null==n?n:Number.isNaN(n)?void 0:n}}),o.a.createElement("br",null),o.a.createElement(q,{label:"是否可以取消选择",toggled:this.selectSessionParams.unselect,onToggle:function(t,n){return e.selectSessionParams.unselect=n}}),o.a.createElement("br",null),o.a.createElement(y.a,{floatingLabelText:"企业id",value:this.selectSessionParams.tenementId,onChange:function(t){e.selectSessionParams.tenementId=t.target.value}}),o.a.createElement("br",null),o.a.createElement(y.a,{hintText:"输入items(可以在PC端编辑，然后复制链接到客户端调试)",value:this.items,onChange:this.handleItemsChange,onBlur:this.validateItems,multiLine:!0,rows:8,style:{width:"100%"},errorText:this.itemsError?this.itemsError.message:void 0}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("label",null,"已选中会话:"),o.a.createElement("br",null),(this.selectSessionParams.selected||[]).map(function(e){return o.a.createElement(U,{key:e.sessionId},e.name,"(",e.sessionId,":",e.sessionType,")")}),o.a.createElement("a",{onClick:this.selectSelected,href:"#"},"选择"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(K,{label:"开始选择",onClick:this.selectSession}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(d.a,null,"请求参数"),o.a.createElement(c.a,null,"\n```json\n"+JSON.stringify(this.selectSessionParams,void 0,2)+"\n```\n          "),o.a.createElement(d.a,null,"响应"),o.a.createElement(c.a,null,"\n```json\n"+JSON.stringify(this.selectedSession||[],void 0,2)+"\n```\n          "),o.a.createElement("ul",null,this.selectedSession.map(function(t){return o.a.createElement("li",{key:t.sessionId},t.sessionId,"(",t.sessionType,")"," ",o.a.createElement(S.a,{label:"打开会话框",onClick:function(){return e.openSession1(t.sessionId,t.sessionType)}}))}))),o.a.createElement(m.a,null,o.a.createElement(d.a,null,"示例代码"),o.a.createElement(c.a,null,"\n```typescript\nimport Api, { BridgeResponseError, SelectSessionResponse } from '@gdjiami/gzb-jssdk'\nconst api = Api()\n\nasync function selectionSession(multiple: boolean, title: string): Promise<SelectSessionResponse> {\n  try {\n    return await api.selectSession({ multiple, title })\n  } catch (error) {\n    if (error instanceof BridgeResponseError) {\n      alert(`选择会话失败: ${error.errCode}: ${error.message}`)\n    }\n  }\n}\n\napi(true, '选择会话')\n```\n          ")),o.a.createElement(p.a,null,"2. 打开会话",o.a.createElement(f.a,{android:!0,ios:!0,pc:!0})),o.a.createElement(m.a,null,o.a.createElement(y.a,{hintText:"输入用户id",value:this.userId,onChange:this.handleUserIdChange}),o.a.createElement("br",null),o.a.createElement(T.a,{floatingLabelText:"type",value:this.type,onChange:function(t,n,a){return e.type=a}},o.a.createElement(C.a,{value:1,primaryText:"群聊"}),o.a.createElement(C.a,{value:2,primaryText:"单聊"}),o.a.createElement(C.a,{value:3,primaryText:"公告广播"}),o.a.createElement(C.a,{value:4,primaryText:"访客"})),o.a.createElement("br",null),o.a.createElement(K,{label:"打开会话框",onClick:function(){return e.openSession()}})),o.a.createElement(m.a,null,o.a.createElement(d.a,null,"示例代码"),o.a.createElement(c.a,null,"\n```typescript\nimport Api, { DialogType } from '@gdjiami/gzb-jssdk'\nconst api = Api()\napi().openDialog({ type: DialogType.Chat, id: userID })\n```\n          ")),o.a.createElement(m.a,null,o.a.createElement(p.a,null,"文档"),o.a.createElement(u.a,null,"\n###  selectSession\n用户获取会话id\n\n► **selectSession**(params?: *SelectSessionParams*): `Promise`<SelectSessionResponse>\n\n**Parameters:**\n\n| Param | Type | Description |\n| ------ | ------ | ------ |\n| params | SelectSessionParams   |  参数 |\n\n**Returns:** `Promise`< SelectSessionResponse>\n\n**Types:**\n```typescript\n\n/**\n * 会话类型\n */\nexport type SessionType =\n  | 'user'\n  | 'chatroom'\n  | 'publicAccount'\n  | 'localContact'\n  | 'visitor'\n\n/**\n * 选择会话请求参数\n */\ninterface SelectSessionParams {\n  /**\n   * 是否支持多选\n   */\n  multiple?: boolean\n  /**\n   * 对话框显示的标题\n   */\n  title?: string\n  /**\n   * 选择会话的类型\n   */\n  sessionType?: SessionType[]\n  /**\n   * 限制\n   */\n  limit?: number\n  /**\n   * 已选择的会话\n   */\n  selected?: GZBSession[]\n  /**\n   * 是否可以取消已选择的会话\n   */\n  unselect?: boolean\n  tenementId?: string\n}\n\n/**\n * 选择会话响应参数\n */\ntype SelectSessionResponse = Array<{\n  sessionId: string\n  sessionType: 'user' | 'chatroom'\n  icon?: string\n  name?: string\n}>\n```\n\n---\n\n###  openDialog\n\n► **openDialog**(params: *DialogParams*): `void`\n\n**Parameters:**\n\n| Param | Type | Description |\n| ------ | ------ | ------ |\n| params | DialogParams  |  选项<br/>+ type: 会话类型, 1 群聊 2 单聊 3公告广播<br/>+ id: 会话ID， 群组id或个人id<br/>+ messageId: //消息记录ID |\n\n**Returns:** `void`\n\n**Types:**\n\n```typescript\n/**\n * 会话类型\n */\nenum DialogType {\n  /**\n   * 群聊\n   */\n  GroupChat = 1,\n  /**\n   * 单聊\n   */\n  Chat,\n  /**\n   * 公告广播\n   */\n  Announcement,\n  /**\n   * 打开访客聊天窗口, id为访客id\n   */\n  Visitor,\n}\n\n/**\n * 打开会话框请求参数\n */\ninterface DialogParams {\n  type: DialogType\n  id: string\n  messageId?: string\n}\n```\n          ")))},N([i.observable,L("design:type",String)],t.prototype,"userId",void 0),N([i.observable,L("design:type",Number)],t.prototype,"type",void 0),N([i.observable,L("design:type",String)],t.prototype,"items",void 0),N([i.observable,L("design:type",Error)],t.prototype,"itemsError",void 0),N([i.observable,L("design:type",Object)],t.prototype,"selectSessionParams",void 0),N([i.observable,L("design:type",Array)],t.prototype,"selectedSession",void 0),t=N([r.observer],t)}(o.a.Component);t.default=J;var G,W,V},835:function(e,t,n){"use strict";var a=n(48),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};t.a=a.b.h3(r||(r=o(["\n  font-size: 0.95em;\n  margin: 0.6em 0;\n"],["\n  font-size: 0.95em;\n  margin: 0.6em 0;\n"])));var r},845:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(846),r=a(o);t.default=r.default},846:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var a=t.muiTheme.chip,o=e.backgroundColor||a.backgroundColor,r=(0,D.emphasize)(o,.08),s=(0,D.emphasize)(o,.12);return{avatar:{marginRight:-4},deleteIcon:{color:n.deleteHovered?(0,D.fade)(a.deleteIconColor,.4):a.deleteIconColor,cursor:"pointer",margin:"4px 4px 0px -8px"},label:{color:e.labelColor||a.textColor,fontSize:a.fontSize,fontWeight:a.fontWeight,lineHeight:"32px",paddingLeft:12,paddingRight:12,userSelect:"none",whiteSpace:"nowrap"},root:{backgroundColor:n.clicked?s:n.focused||n.hovered?r:o,borderRadius:16,boxShadow:n.clicked?a.shadow:null,cursor:e.onClick?"pointer":"default",display:"flex",whiteSpace:"nowrap",width:"fit-content"}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),s=a(r),l=n(13),i=a(l),c=n(7),u=a(c),p=n(5),d=a(p),m=n(6),f=a(m),h=n(8),y=a(h),b=n(9),v=a(b),g=n(11),S=a(g),E=n(0),T=a(E),P=n(1),C=a(P),w=n(76),_=a(w),D=n(75),I=n(116),k=a(I),x=n(847),M=a(x),j=function(e){function t(){var e,n,a,o;(0,d.default)(this,t);for(var r=arguments.length,s=Array(r),l=0;l<r;l++)s[l]=arguments[l];return n=a=(0,y.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(s))),a.state={clicked:!1,deleteHovered:!1,focused:!1,hovered:!1},a.handleBlur=function(e){a.setState({clicked:!1,focused:!1}),a.props.onBlur(e)},a.handleFocus=function(e){(a.props.onClick||a.props.onRequestDelete)&&a.setState({focused:!0}),a.props.onFocus(e)},a.handleKeyboardFocus=function(e,t){t?(a.handleFocus(),a.props.onFocus(e)):a.handleBlur(),a.props.onKeyboardFocus(e,t)},a.handleKeyDown=function(e){"backspace"===(0,_.default)(e)&&(e.preventDefault(),a.props.onRequestDelete&&a.props.onRequestDelete(e)),a.props.onKeyDown(e)},a.handleMouseDown=function(e){0===e.button&&(e.stopPropagation(),a.props.onClick&&a.setState({clicked:!0})),a.props.onMouseDown(e)},a.handleMouseEnter=function(e){a.props.onClick&&a.setState({hovered:!0}),a.props.onMouseEnter(e)},a.handleMouseEnterDeleteIcon=function(){a.setState({deleteHovered:!0})},a.handleMouseLeave=function(e){a.setState({clicked:!1,hovered:!1}),a.props.onMouseLeave(e)},a.handleMouseLeaveDeleteIcon=function(){a.setState({deleteHovered:!1})},a.handleMouseUp=function(e){a.setState({clicked:!1}),a.props.onMouseUp(e)},a.handleTouchTapDeleteIcon=function(e){e.stopPropagation(),a.props.onRequestDelete(e)},a.handleTouchEnd=function(e){a.setState({clicked:!1}),a.props.onTouchEnd(e)},a.handleTouchStart=function(e){e.stopPropagation(),a.props.onClick&&a.setState({clicked:!0}),a.props.onTouchStart(e)},o=n,(0,y.default)(a,o)}return(0,v.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e={onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp,onTouchEnd:this.handleTouchEnd,onTouchStart:this.handleTouchStart,onKeyboardFocus:this.handleKeyboardFocus},t=this.context.muiTheme.prepareStyles,n=o(this.props,this.context,this.state),a=this.props,r=a.children,l=a.containerElement,c=a.style,u=a.className,p=a.deleteIconStyle,d=a.labelStyle,m=(a.labelColor,a.backgroundColor,a.onRequestDelete,(0,i.default)(a,["children","containerElement","style","className","deleteIconStyle","labelStyle","labelColor","backgroundColor","onRequestDelete"])),f=this.props.onRequestDelete,h=null,y=f?T.default.createElement(M.default,{color:n.deleteIcon.color,style:(0,S.default)(n.deleteIcon,p),onClick:this.handleTouchTapDeleteIcon,onMouseEnter:this.handleMouseEnterDeleteIcon,onMouseLeave:this.handleMouseLeaveDeleteIcon}):null,b=r;return T.default.Children.count(b)>1&&(b=T.default.Children.toArray(b),T.default.isValidElement(b[0])&&"Avatar"===b[0].type.muiName&&(h=b.shift(),h=T.default.cloneElement(h,{style:(0,S.default)(n.avatar,h.props.style),size:32}))),T.default.createElement(k.default,(0,s.default)({},m,e,{className:u,containerElement:l,disableTouchRipple:!0,disableFocusRipple:!0,style:(0,S.default)(n.root,c)}),h,T.default.createElement("span",{style:t((0,S.default)(n.label,d))},b),y)}}]),t}(E.Component);j.defaultProps={containerElement:"div",onBlur:function(){},onFocus:function(){},onKeyDown:function(){},onKeyboardFocus:function(){},onMouseDown:function(){},onMouseEnter:function(){},onMouseLeave:function(){},onMouseUp:function(){},onTouchEnd:function(){},onTouchStart:function(){}},j.contextTypes={muiTheme:C.default.object.isRequired},j.propTypes={},t.default=j},847:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),s=n(62),l=a(s),i=n(63),c=a(i),u=function(e){return r.default.createElement(c.default,e,r.default.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}))};u=(0,l.default)(u),u.displayName="NavigationCancel",u.muiName="SvgIcon",t.default=u}});
//# sourceMappingURL=3.01a7eca5.chunk.js.map