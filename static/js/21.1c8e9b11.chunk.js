webpackJsonp([21],{532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n.n(a),o=n(74),l=(n.n(o),n(549)),i=(n.n(l),n(48)),c=n(47),s=n(555),u=n(554),p=n(550),m=n(553),h=n(551),f=n(556),d=n.n(f),g=n(576),b=n.n(g),y=n(552),v=n.n(y),E=n(204),w=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},T=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),x=this&&this.__decorate||function(e,t,n,a){var r,o=arguments.length,l=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,a);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(l=(o<3?r(l):o>3?r(t,n,l):r(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function l(e){try{c(a.next(e))}catch(e){o(e)}}function i(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,i)}c((a=a.apply(e,t||[])).next())})},P=this&&this.__generator||function(e,t){function n(e){return function(t){return a([e,t])}}function a(n){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(l=2&n[0]?o.return:n[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,n[1])).done)return l;switch(o=0,l&&(n=[2&n[0],l.value]),n[0]){case 0:case 1:l=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(l=c.trys,!(l=l.length>0&&l[l.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!l||n[1]>l[0]&&n[1]<l[3])){c.label=n[1];break}if(6===n[0]&&c.label<l[1]){c.label=l[1],l=n;break}if(l&&c.label<l[2]){c.label=l[2],c.ops.push(n);break}l[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{r=l=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,o,l,i,c={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},j=Object(i.b)(v.a)(L||(L=w(["margin-left: 1em;"],["margin-left: 1em;"]))),A=Object(i.b)(b.a)(G||(G=w(["max-width: 300px;"],["max-width: 300px;"]))),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params={preferNative:!0,maximumAge:1e4,timeout:1e4,enableHighAccuracy:!0,watch:!1},t.handleTogglePreferNative=function(e,n){t.params.preferNative=n},t.handleEnableWatch=function(e,n){t.params.watch=n},t.handleToggleHAC=function(e,n){t.params.enableHighAccuracy=n},t.handleMaximumAgeChange=function(e){t.params.maximumAge=parseInt(e.target.value,10)},t.handleTimeoutChange=function(e){t.params.timeout=parseInt(e.target.value,10)},t.getLocation=function(){return O(t,void 0,void 0,function(){var e,t;return P(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,Object(E.f)().getLocation(this.params)];case 1:return e.res=n.sent(),[3,3];case 2:return t=n.sent(),this.error={code:t.code||t.errCode,message:t.message},[3,3];case 3:return[2]}})})},t}return T(t,e),t.prototype.render=function(){return r.a.createElement("div",{className:this.props.className},r.a.createElement(l.Helmet,null,r.a.createElement("title",null,"GetLocation")),r.a.createElement(p.a,null,"获取当前位置",r.a.createElement(m.a,{android:!0,ios:!0,pc:!0})),r.a.createElement(h.a,null,r.a.createElement(A,{label:"preferNative(优先调用原生方法)",toggled:this.params.preferNative,onToggle:this.handleTogglePreferNative}),r.a.createElement("br",null),r.a.createElement(d.a,{hintText:"maximumAge(当前位置缓存周期事件)",value:this.params.maximumAge,onChange:this.handleMaximumAgeChange}),r.a.createElement("br",null),r.a.createElement(d.a,{hintText:"timeout(超时事件)",value:this.params.timeout,onChange:this.handleTimeoutChange}),r.a.createElement("br",null),r.a.createElement(A,{label:"enableHighAccuracy(启用高精度)",toggled:this.params.enableHighAccuracy,onToggle:this.handleToggleHAC}),r.a.createElement("br",null),r.a.createElement(A,{label:"watch(监视模式)",toggled:this.params.watch,onToggle:this.handleEnableWatch}),r.a.createElement("br",null),r.a.createElement(j,{label:"获取",onClick:this.getLocation}),r.a.createElement("br",null),!!this.res&&r.a.createElement("ul",null,r.a.createElement("li",null,"latitude: ",this.res.latitude),r.a.createElement("li",null,"longitude: ",this.res.longitude),r.a.createElement("li",null,"coordType(坐标系统编码): ",this.res.coordType),r.a.createElement("li",null,"accuracy: ",this.res.accuracy),r.a.createElement("li",null,"address(反向解析的中文详细地址): ",this.res.address)),!!this.error&&r.a.createElement("ul",null,r.a.createElement("li",null,"errCode: ",this.error.code),r.a.createElement("li",null,"message: ",this.error.message))),r.a.createElement(h.a,null,r.a.createElement(p.a,null,"示例代码"),r.a.createElement(u.a,null,"\nimport Api, { BridegeResponseError } from '@gdjiami/gzb-jssdk'\nconst api = Api()\nasync function getLocation() {\n  try {\n    const { latitude, longitude, coordType } = api.getLocation({\n      preferNative: true,\n      maximumAge: 10000,\n      timeout: 10000,\n      enableHighAccuracy: true,\n    })\n\n    // 判断坐标类型进行坐标转换，不然可能会出现坐标偏移的情况\n    switch (coordType) {\n      case 'WGS84': // GPS 坐标， HTML5返回的就是GPS坐标\n      case 'GCJ02': // 火星坐标，在中国地区，高德、GoogleMap都是使用这个格式的坐标\n      case 'BD08':  // 百度坐标， 目前Android原生返回的是百度坐标\n    }\n  } catch (err) {\n    if (err instanceof BridgeResponseError) {\n      console.log(err.errCode, err.message)\n    }\n  }\n}\n          ")),r.a.createElement(h.a,null,r.a.createElement(p.a,null,"文档"),r.a.createElement(s.a,null,"\n获取当前位置 \nFIXME: native 端没有错误处理\n\n► **getLocation**(options?: *`Partial`< GetLocationOptions>*): `Promise`< GetLocationResponse>\n\n**Parameters:**\n\n| Param | Type | Description |\n| ------ | ------ | ------ |\n| options | `Partial`< GetLocationOptions>   |  - |\n\n\n**Returns:** `Promise`< GetLocationResponse>\n\n**Types:**\n\n```typescript\n/**\n * 获取当前为位置请求参数, 请求参数和HTML5的`Geolocation.getCurrentLocation`一致\n */\nexport interface GetLocationOptions extends PositionOptions {\n  /**\n   * 是否优先调用原生接口， 默认为true\n   */\n  preferNative: boolean\n  watch: boolean\n}\n\n/**\n * 获取当前位置响应\n */\nexport interface GetLocationResponse {\n  latitude: number\n  longitude: number\n  speed: number | null\n  /**\n   * 坐标类型\n   */\n  coordType: CoordType\n  /**\n   * 精度(m)\n   */\n  accuracy?: number\n  /**\n   * 反向解析的中文详细地址\n   */\n  address?: string\n}\n```\n")))},x([c.observable,_("design:type",Object)],t.prototype,"res",void 0),x([c.observable,_("design:type",Object)],t.prototype,"error",void 0),x([c.observable,_("design:type",Object)],t.prototype,"params",void 0),t=x([o.observer],t)}(r.a.Component);t.default=C;var L,G}});
//# sourceMappingURL=21.1c8e9b11.chunk.js.map